好的 👍。
内容量确实比较大，我建议拆成 **两次输出**：

- **第一次**：系统能描述文档（更偏“产品需求/PRD + 能力边界”）。
- **第二次**：系统功能对应的**技术设计文档**（表设计、API、前端页面）。

这样你拿到的是一整套成体系的文档，可以直接作为新项目的蓝本。
下面先给你 **第一份：系统能描述文档**。

---

# 📘 系统能描述文档

## 一、系统定位

本系统是一个 **个人资产与收入管理平台**，目标是：

1. **全局视角**：统一管理个人资产（储蓄/投资/借贷）、收入与支出，快速回答“我现在有多少钱”“净资产是多少”“投资收益如何”。
2. **财务透明**：支持多币种，实时折算到用户基准币种，形成清晰的资产负债表与净资产趋势。
3. **收入预测与税务精算**：按 **年度累计计税规则** 计算个人所得税，结合城市社保/公积金政策动态计算。支持工资变动、一次性奖金、长期激励（长期现金、股权激励）。
4. **专业报表**：提供资产维度、分类维度、净资产趋势、收入与税收明细的多维度报表。

---

## 二、核心能力

### 1. 账户管理

- **账户分类**：储蓄（本金=估值）、投资（估值 ≠ 本金）、借贷（负债）。
- **账户功能**：

  - 新建/编辑/归档账户
  - 存取款、转账（同币种/跨币种）
  - 估值更新
  - 收益与收益率计算

### 2. 多币种支持

- 每个账户固定币种
- 跨币种转账以 **USD 为中间价**（支持汇率快照）
- 所有资产折算为用户基准币种（如 CNY）

### 3. 收入与税务

- **工资收入**：通过工资变动记录，确定任意月份的实际工资。
- **一次性奖金**：如开年红包、年终奖、项目奖金，在对应月份计入收入。
- **长期激励**：

  - 长期现金：按季度/期数自动生成分发日程，逐期入账
  - 股权激励：Grant + Vest 模型，支持每年/半年归属，归属时计入收入（含 fairValue）

- **社保/公积金**：按城市与生效区间的上下限、比例动态计算。
- **个税计算**：按 **自然年累计**，结合速算扣除数。
- **预测**：即使展示 5–8 月，也需从 1–8 月逐月累计计算。

### 4. 报表与可视化

- **资产负债表**：资产/负债对比，净资产突出
- **净资产趋势**：按月/季度/年
- **资产占比**：按账户分类与子类下钻
- **收入与税收**：月度工资/奖金/长期激励/股权激励、社保/公积金、税额、税后收入

---

## 三、系统边界

### 支持范围

- 账户级别的资金与估值管理（不涉及证券/基金代码明细）
- 税务计算：以国家税率档与城市社保/公积金政策为准
- 收入预测：支持工资变动、一次性奖金、长期现金、股权激励

### 不支持范围

- 实盘证券交易、实时行情
- 全量理财产品明细管理
- 公司级薪酬管理（仅限个人视角）

---

## 四、用户场景

1. **理财总览**
   用户打开 Dashboard，立即看到：总市值、总负债、净资产，资产占比，净资产趋势。

2. **工资变动**
   3 月涨薪，从 1w → 1.2w，系统会在 3 月记录生效，4 月税前工资自动应用 1.2w。

3. **一次性奖金**
   7 月拿到 2w 项目奖金，该月收入会多出 2w，税后收入和个税自动计算更新。

4. **长期激励**
   用户有一个长期现金计划：16 个季度，每季发放 1w，从 2025-01 开始。系统会生成 16 条 payout，每季度收入自动增加 1w。

5. **股权激励**
   用户有 400 RSU，从 2025-07 开始，每年归属 100 股。归属时系统计算 fairValue 并计入当月收入。

---

## 五、非功能性需求

1. **准确性**：所有计算均基于当期汇率、社保/公积金规则、个税档，保证追溯一致性。
2. **可扩展性**：所有规则均存储为“生效时间区间”，便于政策变化追溯。
3. **审计与追溯**：所有变动（账户、收入、规则更新）必须有时间戳和日志。
4. **性能**：月度计算为主要频率，可支撑用户 10+ 年的历史数据，月度数据不超过 200 条。

---

## 六、系统模块划分

1. **账户子系统**：账户、交易、估值、汇率
2. **收入子系统**：工资变动、奖金、长期激励、股权激励
3. **税务子系统**：社保/公积金规则、税表、累计计税计算器
4. **报表子系统**：资产负债表、净资产趋势、收入与税收报表
5. **系统支撑**：用户管理、审计日志、配置

## 七、权限管理

### 1. 角色与操作

- **普通用户**：查看和维护自己的账户、交易、收入与报表；导出个人数据
- **管理员**：拥有普通用户全部权限；管理用户及其角色；配置系统参数；查看审计日志
- **审计员**：只读访问所有数据；查看审计日志

### 2. 审计日志

系统需记录以下敏感操作，便于追溯：

- 用户登录与登出、登录失败
- 账户或交易的新增、修改、删除
- 用户及角色变更
- 系统配置调整
- 数据导入、导出

